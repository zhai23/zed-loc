# Zed Windows ç¼–è¯‘è¯´æ˜æ–‡æ¡£

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•åœ¨ Windows ä¸Šç¼–è¯‘å¸¦æœ‰ä¸­æ–‡æœ¬åœ°åŒ–çš„ Zed ç¼–è¾‘å™¨ã€‚

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

### å¿…éœ€è½¯ä»¶
- **Windows 10/11** (æ¨èæœ€æ–°ç‰ˆæœ¬)
- **Visual Studio Build Tools 2019/2022** æˆ–å®Œæ•´ç‰ˆ Visual Studio
- **Python 3.10+**
- **Git**
- **Rust** (é€šè¿‡ rustup å®‰è£…)

### ç¡¬ä»¶è¦æ±‚
- **å†…å­˜**: è‡³å°‘ 8GB RAM (æ¨è 16GB+)
- **å­˜å‚¨**: è‡³å°‘ 10GB å¯ç”¨ç©ºé—´
- **æ˜¾å¡**: æ”¯æŒ Vulkan 1.0+ æˆ– OpenGL 3.3+

## ğŸ› ï¸ ç¯å¢ƒå‡†å¤‡

### 1. å®‰è£… Visual Studio Build Tools

ä¸‹è½½å¹¶å®‰è£… [Visual Studio Build Tools](https://visualstudio.microsoft.com/zh-hans/downloads/#build-tools-for-visual-studio-2022)

ç¡®ä¿é€‰æ‹©ä»¥ä¸‹ç»„ä»¶ï¼š
- C++ æ„å»ºå·¥å…·
- Windows 10/11 SDK
- CMake å·¥å…·

### 2. å®‰è£… Python

ä» [Python å®˜ç½‘](https://www.python.org/downloads/) ä¸‹è½½å¹¶å®‰è£… Python 3.10+

å®‰è£…æ—¶ç¡®ä¿å‹¾é€‰ï¼š
- âœ… Add Python to PATH
- âœ… Install pip

### 3. å®‰è£… Git

ä» [Git å®˜ç½‘](https://git-scm.com/download/win) ä¸‹è½½å¹¶å®‰è£… Git

### 4. å®‰è£… Rust

è®¿é—® [rustup.rs](https://rustup.rs/) å¹¶è¿è¡Œå®‰è£…è„šæœ¬ï¼š

```bash
# åœ¨ PowerShell ä¸­è¿è¡Œ
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

æˆ–è€…ä¸‹è½½ `rustup-init.exe` ç›´æ¥è¿è¡Œã€‚

## ğŸš€ ç¼–è¯‘æ­¥éª¤

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ PowerShell è„šæœ¬ (æ¨è)

1. **æ‰“å¼€ PowerShell** (ç®¡ç†å‘˜æƒé™ï¼Œå¯é€‰)
2. **è¿›å…¥é¡¹ç›®ç›®å½•**:
   ```powershell
   cd D:\word2025\zed-loc
   ```
3. **è¿è¡Œç¼–è¯‘è„šæœ¬**:
   ```powershell
   # åŸºæœ¬ç¼–è¯‘ (Vulkan ç‰ˆæœ¬)
   .\build_windows.ps1
   
   # ç¼–è¯‘ OpenGL ç‰ˆæœ¬
   .\build_windows.ps1 -Backend opengl
   
   # ç¼–è¯‘ä¸¤ä¸ªç‰ˆæœ¬
   .\build_windows.ps1 -Backend both
   
   # æ¸…ç†æ„å»º
   .\build_windows.ps1 -Clean
   ```

### æ–¹æ³•äºŒï¼šä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬

```batch
# è¿è¡Œç®€åŒ–ç‰ˆè„šæœ¬
build_simple.bat

# æˆ–è¿è¡Œå®Œæ•´ç‰ˆè„šæœ¬
build_windows.bat
```

### æ–¹æ³•ä¸‰ï¼šæ‰‹åŠ¨ç¼–è¯‘

1. **å¯ç”¨é•¿è·¯å¾„æ”¯æŒ**:
   ```bash
   git config --global core.longpaths true
   ```

2. **å…‹éš†/æ›´æ–° Zed æºä»£ç **:
   ```bash
   git clone https://github.com/zed-industries/zed.git
   # æˆ–è€…å¦‚æœå·²å­˜åœ¨ï¼š
   cd zed && git pull origin main && cd ..
   ```

3. **åº”ç”¨ä¸­æ–‡ç¿»è¯‘**:
   ```bash
   python replace.py
   ```

4. **å‡†å¤‡ Rust ç¯å¢ƒ**:
   ```bash
   rustup toolchain install nightly
   rustup target add wasm32-wasip1
   rustup default nightly
   ```

5. **ç¼–è¯‘**:
   ```bash
   cd zed
   
   # Vulkan ç‰ˆæœ¬
   cargo build --release
   
   # OpenGL ç‰ˆæœ¬
   set RUSTFLAGS=--cfg gles
   cargo build --release
   ```

## ğŸ“¦ è¾“å‡ºæ–‡ä»¶

ç¼–è¯‘æˆåŠŸåï¼Œå¯æ‰§è¡Œæ–‡ä»¶ä¼šç”Ÿæˆåœ¨ï¼š

- **PowerShell è„šæœ¬**: `output/zed-windows.exe` æˆ– `output/zed-windows-opengl.exe`
- **æ‰¹å¤„ç†è„šæœ¬**: `output/zed-chinese.exe`
- **æ‰‹åŠ¨ç¼–è¯‘**: `zed/target/release/zed.exe`

## ğŸ”§ ç‰ˆæœ¬è¯´æ˜

### Vulkan ç‰ˆæœ¬
- **ä¼˜ç‚¹**: æ€§èƒ½æ›´å¥½ï¼ŒGPU åŠ é€Ÿæ¸²æŸ“
- **ç¼ºç‚¹**: éœ€è¦è¾ƒæ–°çš„æ˜¾å¡é©±åŠ¨
- **é€‚ç”¨**: ç°ä»£æ˜¾å¡ï¼Œæ¸¸æˆæœ¬ï¼Œå°å¼æœº

### OpenGL ç‰ˆæœ¬
- **ä¼˜ç‚¹**: å…¼å®¹æ€§æ›´å¥½ï¼Œæ”¯æŒè€æ˜¾å¡
- **ç¼ºç‚¹**: æ€§èƒ½ç•¥ä½
- **é€‚ç”¨**: è€æ˜¾å¡ï¼Œè™šæ‹Ÿæœºï¼Œé›†æˆæ˜¾å¡

## â“ å¸¸è§é—®é¢˜

### Q1: ç¼–è¯‘æ—¶å‡ºç° "toolchain not found" é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**: 
```bash
rustup toolchain install nightly
rustup default nightly
```

### Q2: ç¼–è¯‘æ—¶å‡ºç°å†…å­˜ä¸è¶³é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**:
- å…³é—­å…¶ä»–ç¨‹åºé‡Šæ”¾å†…å­˜
- å¢åŠ è™šæ‹Ÿå†…å­˜å¤§å°
- ä½¿ç”¨ `cargo build --release --jobs 1` é™åˆ¶å¹¶è¡Œåº¦

### Q3: ä¸­æ–‡ç¿»è¯‘æ²¡æœ‰ç”Ÿæ•ˆ
**è§£å†³æ–¹æ¡ˆ**:
1. ç¡®ä¿ `replace.py` æ­£ç¡®æ‰§è¡Œ
2. æ£€æŸ¥ `zh.json` æ–‡ä»¶æ˜¯å¦å­˜åœ¨
3. é‡æ–°è¿è¡Œ `python replace.py`

### Q4: è¿è¡Œæ—¶å‡ºç° "invalid HTTP header name" é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**:
è¿™å·²ç»åœ¨æœ€æ–°ç‰ˆæœ¬ä¸­ä¿®å¤ã€‚ç¡®ä¿ä½¿ç”¨æœ€æ–°çš„ç¿»è¯‘æ–‡ä»¶ã€‚

### Q5: Anthropic æ¨¡å‹ä¸å“åº”
**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ API å¯†é’¥æ˜¯å¦æ­£ç¡®
2. ç¡®ä¿ç½‘ç»œè¿æ¥æ­£å¸¸
3. æŸ¥çœ‹é”™è¯¯æ—¥å¿—è·å–è¯¦ç»†ä¿¡æ¯

### Q6: ç¼–è¯‘æ—¶é—´å¾ˆé•¿
**è§£å†³æ–¹æ¡ˆ**:
- é¦–æ¬¡ç¼–è¯‘éœ€è¦ä¸‹è½½å’Œç¼–è¯‘å¤§é‡ä¾èµ–ï¼Œéœ€è¦30-60åˆ†é’Ÿ
- åç»­å¢é‡ç¼–è¯‘ä¼šå¿«å¾ˆå¤š
- å¯ä»¥ä½¿ç”¨ `cargo build --release --jobs <CPUæ ¸å¿ƒæ•°>` è°ƒæ•´å¹¶è¡Œåº¦

### Q7: æƒé™é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**:
- ä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œ PowerShell
- æ£€æŸ¥é˜²ç—…æ¯’è½¯ä»¶æ˜¯å¦é˜»æ­¢äº†æ–‡ä»¶æ“ä½œ
- ç¡®ä¿æœ‰è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´

## ğŸ“ ç¼–è¯‘é…ç½®

### ç¯å¢ƒå˜é‡
```bash
# ä¼˜åŒ–ç¼–è¯‘
set CARGO_PROFILE_RELEASE_LTO=thin
set CARGO_PROFILE_RELEASE_CODEGEN_UNITS=1

# ç›®æ ‡æ¶æ„
set RUSTFLAGS=-C target-cpu=native
```

### ç¼–è¯‘é€‰é¡¹
```bash
# å®Œæ•´ä¼˜åŒ–ï¼ˆç¼–è¯‘æ—¶é—´æ›´é•¿ï¼Œä½†æ€§èƒ½æ›´å¥½ï¼‰
cargo build --release --target=x86_64-pc-windows-msvc

# å¿«é€Ÿç¼–è¯‘ï¼ˆç”¨äºæµ‹è¯•ï¼‰
cargo build
```

## ğŸ¯ æ€§èƒ½ä¼˜åŒ–

### ç¼–è¯‘æ€§èƒ½
1. **ä½¿ç”¨ SSD**: å°†é¡¹ç›®æ”¾åœ¨ SSD ä¸Š
2. **å¢åŠ å†…å­˜**: è‡³å°‘ 16GB RAM
3. **å…³é—­é˜²ç—…æ¯’å®æ—¶æ‰«æ**: ä¸´æ—¶å…³é—­å¯¹é¡¹ç›®ç›®å½•çš„æ‰«æ
4. **ä½¿ç”¨ Cargo ç¼“å­˜**: å¯ç”¨å¢é‡ç¼–è¯‘

### è¿è¡Œæ—¶æ€§èƒ½
1. **é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬**: Vulkan > OpenGL
2. **æ›´æ–°æ˜¾å¡é©±åŠ¨**: ä½¿ç”¨æœ€æ–°çš„æ˜¾å¡é©±åŠ¨
3. **å…³é—­ä¸å¿…è¦çš„åå°ç¨‹åº**

## ğŸ“ æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. **æŸ¥çœ‹æ—¥å¿—**: æ£€æŸ¥ç¼–è¯‘è¾“å‡ºä¸­çš„é”™è¯¯ä¿¡æ¯
2. **æœç´¢å·²çŸ¥é—®é¢˜**: æŸ¥çœ‹é¡¹ç›® Issues
3. **é‡è¯•**: ç½‘ç»œé—®é¢˜å¯¼è‡´çš„å¤±è´¥å¯ä»¥é‡è¯•
4. **æ¸…ç†é‡å»º**: ä½¿ç”¨ `-Clean` é€‰é¡¹æ¸…ç†åé‡æ–°ç¼–è¯‘

## ğŸ”„ æ›´æ–°

è¦æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼š

1. æ›´æ–°æœ¬åœ°åŒ–é¡¹ç›®:
   ```bash
   git pull origin main
   ```

2. é‡æ–°ç¼–è¯‘:
   ```bash
   .\build_windows.ps1
   ```

## âœ… éªŒè¯å®‰è£…

ç¼–è¯‘å®Œæˆåï¼Œæµ‹è¯•ä»¥ä¸‹åŠŸèƒ½ç¡®ä¿æ­£å¸¸å·¥ä½œï¼š

1. **å¯åŠ¨æµ‹è¯•**: åŒå‡»è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶
2. **ä¸­æ–‡ç•Œé¢**: æ£€æŸ¥ç•Œé¢æ˜¯å¦ä¸ºä¸­æ–‡
3. **AI åŠŸèƒ½**: æµ‹è¯• OpenAI å’Œ Anthropic é›†æˆ
4. **åŸºæœ¬ç¼–è¾‘**: åˆ›å»ºã€ç¼–è¾‘ã€ä¿å­˜æ–‡ä»¶
5. **ä¸»é¢˜åˆ‡æ¢**: æµ‹è¯•æ˜æš—ä¸»é¢˜åˆ‡æ¢

---

**æ³¨æ„**: ç¼–è¯‘è¿‡ç¨‹å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´ï¼ˆé¦–æ¬¡ç¼–è¯‘ 30-60 åˆ†é’Ÿï¼‰ï¼Œè¯·ä¿æŒç½‘ç»œè¿æ¥ç¨³å®šå¹¶è€å¿ƒç­‰å¾…ã€‚